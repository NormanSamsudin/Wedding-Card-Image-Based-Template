<!-- Splash Overlay for Initial Animation -->
<div class="splash-overlay" [class.splash-hidden]="splashHidden">
  <div class="splash-content">
    <img src="/akak/splash_new.jpg" alt="Wedding Splash" class="splash-image" />
  </div>
</div>

<div class="landing-background-landing" [class.landing-visible]="splashHidden">
  <div class="scrollable-content">
    <div class="image-container">
      <img 
        src="/akak/landing_new2.jpg" 
        alt="Landing Background" 
        class="landing-image"
      />
    </div>
  </div>
  
  <!-- Smooth scroll indicator -->
  <div class="scroll-indicator">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M7 14L12 19L17 14" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M7 8L12 13L17 8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>
</div>
<!-- Bottom Navigation with RSVP button -->
<app-bottom-navigation (navigationClick)="onNavigationClick($event)" (musicToggle)="toggleMusic()"></app-bottom-navigation>

  <!-- Wishes Modal -->
  <div class="wishes-modal-overlay" *ngIf="wishesModalOpen" (click)="closeWishesModal()">
    <div class="wishes-modal" (click)="$event.stopPropagation()">
      <div *ngIf="isLoadingWishes" class="loading-wishes">
        <div class="spinner"></div>
      </div>
      <div *ngIf="!isLoadingWishes && wishes.length === 0" class="no-wishes">Tiada ucapan lagi.</div>
      <div *ngIf="!isLoadingWishes && wishes.length > 0" class="wishes-modal-carousel">
        <div class="wishes-carousel-container">
          <div *ngFor="let wish of wishes; let i = index" 
               class="wish-card-modal" 
               [class.active]="i === currentWishIndex">
            <div class="wish-main-simple">
              <div class="wish-message-simple">{{ wish.message }}</div>
              <div class="wish-author-simple">- {{ wish.name }} -</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- RSVP Modal -->
  <div class="rsvp-modal-overlay" *ngIf="rsvpModalOpen" (click)="closeRSVPModal()">
    <div class="rsvp-modal" (click)="$event.stopPropagation()">
      <form class="rsvp-form" (ngSubmit)="submitRSVP()" #rsvpFormRef="ngForm">
        <div class="rsvp-row">
          <div class="rsvp-input-group">
            <label for="name">Nama</label>
            <input type="text" id="name" [(ngModel)]="rsvpForm.name" name="name" required />
          </div>
          <div class="rsvp-input-group">
            <label for="jumlahRombongan">Bil. Peserta</label>
            <input type="number" id="jumlahRombongan" name="jumlahRombongan" min="1" max="20" [(ngModel)]="rsvpForm.jumlahRombongan"  required />
          </div>
        </div>
        
        <!-- Checkbox row -->
        <div class="rsvp-checkbox-group">
          <label class="rsvp-checkbox">
            <input type="checkbox" [(ngModel)]="rsvpForm.hadir" name="hadir" (change)="rsvpForm.hadir ? rsvpForm.tidakHadir = false : null" /> Hadir
          </label>
          <label class="rsvp-checkbox">
            <input type="checkbox" [(ngModel)]="rsvpForm.tidakHadir" name="tidakHadir" (change)="rsvpForm.tidakHadir ? rsvpForm.hadir = false : null" /> Tidak Hadir
          </label>
        </div>
        
        <!-- Full width message field -->
        <div class="rsvp-input-group full-width">
          <label for="message">Ucapan</label>
          <textarea id="message" name="message" [(ngModel)]="rsvpForm.message" rows="3" required></textarea>
        </div>
        <br />
        <button type="submit" class="rsvp-gradient-btn" [disabled]="rsvpService.loading$ | async">Hantar</button>
  
      </form>
      <!-- RSVP Error/Success Popup -->
      <div *ngIf="rsvpPopupMessage" class="rsvp-popup-message" [ngClass]="{'error': rsvpPopupType==='error', 'success': rsvpPopupType==='success'}">
        <div class="rsvp-popup-content">
          <span>{{ rsvpPopupMessage }}</span>
          <button class="rsvp-popup-close" (click)="closeRSVPPopup()">Tutup</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Location Modal -->
  <div class="location-modal-overlay" *ngIf="locationModalOpen" (click)="closeLocationModal()">
    <div class="location-modal" (click)="$event.stopPropagation()">
        <div style="width:100%; display:flex; flex-direction:column; ">
          <div style="width:100%; display:flex; justify-content:center;">
            <iframe
              width="98%"
              height="100"
              frameborder="0"
              style="border-radius:14px; border:0; box-shadow:0 2px 12px rgba(80,80,80,0.08);"
              src="https://www.google.com/maps?q=3.079934,101.5669504&z=16&output=embed"
              allowfullscreen=""
              aria-hidden="false"
              tabindex="0"
            ></iframe>
          </div>
          <div style="width:100%; display:flex; justify-content:center; gap:8px; margin-top:18px;">
            <a href="https://www.google.com/maps/place/3.079934,101.5669504" target="_blank" class="location-gradient-btn" style="display:inline-flex;align-items:center;gap:8px;min-width:0;padding:10px 18px;text-decoration:none!important;">
              <img src="/akak/icon/google.png" alt="Google Maps" style="width:22px;height:22px;filter:brightness(0) invert(1);" /> Google Maps
            </a>
            <a href="https://www.waze.com/live-map/directions?to=ll.3.141983%2C101.513822" target="_blank" class="location-gradient-btn" style="display:inline-flex;align-items:center;gap:8px;min-width:0;padding:10px 18px;text-decoration:none!important;">
              <img src="/akak/icon/waze.png" alt="Waze" style="width:22px;height:22px;filter:brightness(0) invert(1);" /> Waze
            </a>
          </div>
        </div>
    </div>
  </div>

  <!-- Contact Modal -->
  <div class="contact-modal-overlay" *ngIf="contactModalOpen" (click)="closeContactModal()">
    <div class="contact-modal" (click)="$event.stopPropagation()">
      <div class="contact-content">
        <div class="contact-item">
          <div class="contact-info">
            <span class="contact-name">Samsudin</span>
            <span class="contact-role">Father</span>
          </div>
          <div class="contact-actions">
            <a [href]="'https://wa.me/60142437636'" target="_blank" title="WhatsApp">
              <img src="akak/icon/whatsapp.png" alt="WhatsApp" class="contact-icon" />
            </a>
            <a [href]="'tel:0182402451'" title="Call">
              <img src="/akak/icon/phone.svg" alt="Call" class="contact-icon phone" />
            </a>
          </div>
        </div>
        <div class="contact-item">
          <div class="contact-info">
            <span class="contact-name">Fikry</span>
            <span class="contact-role">Brother</span>
          </div>
          <div class="contact-actions">
            <a [href]="'https://wa.me/60172536079'" target="_blank" title="WhatsApp">
              <img src="akak/icon/whatsapp.png" alt="WhatsApp" class="contact-icon" />
            </a>
            <a [href]="'tel:0182402451'" title="Call">
              <img src="/akak/icon/phone.svg" alt="Call" class="contact-icon phone" />
            </a>
          </div>
        </div>
        <div class="contact-item">
          <div class="contact-info">
            <span class="contact-name">Fahmi</span>
            <span class="contact-role">Brother</span>
          </div>
          <div class="contact-actions">
            <a [href]="'https://wa.me/6016234543345'" target="_blank" title="WhatsApp">
              <img src="akak/icon/whatsapp.png" alt="WhatsApp" class="contact-icon" />
            </a>
            <a [href]="'tel:0182402451'" title="Call">
              <img src="/akak/icon/phone.svg" alt="Call" class="contact-icon phone" />
            </a>
          </div>
        </div>
        <div class="contact-item">
          <div class="contact-info">
            <span class="contact-name">Norman</span>
            <span class="contact-role">Brother</span>
          </div>
          <div class="contact-actions">
            <a [href]="'https://wa.me/60182402451'" target="_blank" title="WhatsApp">
              <img src="akak/icon/whatsapp.png" alt="WhatsApp" class="contact-icon" />
            </a>
            <a [href]="'tel:0182402451'" title="Call">
              <img src="/akak/icon/phone.svg" alt="Call" class="contact-icon phone" />
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
